<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat  - Myagentia</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    
    <link rel="stylesheet" href="style.css">
</head>
<body class="show-chatbot">

    <button id="chat-toggler">
        <span class="material-symbols-outlined">mode_comment</span>
        <span class="material-symbols-outlined">close</span>
    </button>
    <div class="chatbot-popup">
       
        <!-- header  -->
        <div class="chat-header">
            <div class="header-info">
                <img src="./ico.png" width="50" height="50" class="chatbot-logo">
                <h2 class="logo-text">Agente</h2>
            </div>
        </div>

        <!-- body -->
        <div class="chat-body">
        </div>

        <!-- footer -->
        <div class="chat-footer">
            <form action="#" class="chat-form">
                <textarea class="message-input" placeholder="Mensaje..." required></textarea>
                <div class="chat-controls">
                    <button type="button" class="material-symbols-outlined" id="emoji-picker">
                        sentiment_satisfied
                    </button>
                    <div class="file-upload-wrapper">
                        <input type="file" accept=".pdf,.jpg,.jpeg,.png" id="file-input" hidden>
                        <img src="#">
                        <button type="button" id="file-upload" class="material-symbols-outlined">
                            attach_file
                        </button>
                        <button type="button" id="file-cancel" class="material-symbols-outlined">
                            close
                        </button>
                    </div>
                    <button type="submit" class="material-symbols-outlined" id="send-message">
                        arrow_upward
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- emojis  -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-mart@latest/dist/browser.js"></script>

    <!-- javascript principal  -->
    <script src="./script.js"></script>
    <script>
        // En el código del chatbot dentro del iframe
        function sendHeightToParent() {
            const height = document.body.scrollHeight;  // Obtener la altura total del contenido del chatbot
            const width = window.innerWidth;
            const chatbody = document.querySelector('.chat-body');
            const popup = document.querySelector('.chatbot-popup');

            chatbody.style.height = (height-250)+'px';
            popup.style.width = (width)+'px';
            window.parent.postMessage({ action: 'resize', height: height }, '*');  // Enviar la altura al contenedor principal
        }

        // Enviar la altura cuando el contenido esté completamente cargado
        window.addEventListener('load', sendHeightToParent);

        // Si el contenido cambia dinámicamente, puedes volver a enviar la altura
        window.addEventListener('resize', sendHeightToParent);
    </script>
</body>
</html>